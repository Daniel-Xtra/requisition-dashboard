<div class="w-full" *ngIf="activePage !== memberPages.VIEW_MEMBER">
  <!-- <h1 class="uppercase font-semibold tracking-wider text-lg pt-2 pb-4">
    manage members
  </h1> -->

  <div class="grid xl:grid-cols-3 md:grid-cols-2 mb-16 gap-4 w-full">
    <div
      class="bg-white clicker rounded-md space-y-3 h-auto py-7 pl-8 border cursor-pointer {{
        activePage === memberPages.TOTAL_MEMBERS
          ? 'active:shadow-none'
          : 'shadow-lg'
      }}"
      (click)="
        pageChangeHandler(memberPages.TOTAL_MEMBERS);
        activeTab = memberPages.TOTAL_MEMBERS;
        fetchStaffs(1)
      "
    >
      <div class="flex items-center h-full gap-6">
        <img src="assets/imgs/total-members.svg" alt="" />
        <div class="block space-y-3">
          <div class="text-black text-md font-normal">{{ totalMember() }}</div>
          <h1 class="text-sm font-normal text-ash-40 tracking-wider">
            Total Number of Members
          </h1>
        </div>
      </div>
    </div>
    <div
      class="bg-white clicker  rounded-md space-y-3 h-auto py-7 pl-8 border hover:bg-white  cursor-pointer  {{
        activePage === memberPages.ACTIVE_MEMBERS
          ? 'active:shadow-none'
          : 'shadow-lg'
      }}  "
      (click)="
        pageChangeHandler(memberPages.ACTIVE_MEMBERS);
        activeTab = memberPages.ACTIVE_MEMBERS;
        fetchStaffs(1, 'true')
      "
    >
      <div class="flex items-center h-full gap-6">
        <img src="assets/imgs/active-members.svg" alt="" />
        <div class="block space-y-3">
          <div class="text-black text-md font-normal">{{ activeMember() }}</div>
          <h1 class="text-sm font-normal text-ash-40 tracking-wider">
            Total Verified Members
          </h1>
        </div>
      </div>
    </div>
    <div
      class="bg-white clicker  rounded-md space-y-3 h-auto p-8 border cursor-pointer {{
        activePage === memberPages.INACTIVE_MEMBERS
          ? 'active:shadow-none'
          : 'shadow-lg'
      }}   "
      (click)="
        pageChangeHandler(memberPages.INACTIVE_MEMBERS);
        activeTab = memberPages.INACTIVE_MEMBERS;
        fetchStaffs(1, 'false')
      "
    >
      <div class="flex items-center h-full gap-6">
        <img src="assets/imgs/inactive-members.svg" alt="" />
        <div class="block space-y-3">
          <div class="text-black text-md font-normal">
            {{ inactiveMember() }}
          </div>
          <h1 class="text-sm font-normal text-ash-40 tracking-wider">
            Not Verified Members
          </h1>
        </div>
      </div>
    </div>
  </div>

  <div class="w-full overflow-x-auto px-5 pt-4 pb-16" id="table">
    <table class="items-center bg-transparent w-full border-collapse">
      <thead>
        <tr>
          <th>#</th>
          <th>Names</th>
          <th>Email</th>
          <th>Role</th>
          <th>Department</th>

          <th>Phone number</th>
          <th>Status</th>
          <th>Actions</th>
          <!-- <th class="invisible">visible</th> -->
        </tr>
      </thead>

      <tbody class="border-b-2">
        <ng-container *ngIf="activePage === memberPages.TOTAL_MEMBERS">
          @for (staff of staffs; track staff) {
          <tr>
            <td class="">{{ $index + 1 }}</td>
            <td>
              <div class="flex gap-2 items-center">
                <img
                  class="inline-block h-8 w-8 rounded-full ring-2 ring-white shrink-0"
                  [src]="
                    staff?.profile.profile_picture_url ||
                    (staff?.gender == 'male'
                      ? 'assets/imgs/male-avatar.svg'
                      : 'assets/imgs/female-avatar.svg')
                  "
                  alt=""
                />{{ staff?.first_name }} {{ staff?.last_name }}
              </div>
            </td>
            <td class="normal-case">{{ staff?.email }}</td>
            <td class="uppercase">{{ staff?.membership_type }}</td>
            <td class="uppercase">{{ staff?.division?.abbreviation }}</td>

            <td>{{ staff?.phone_number }}</td>
            <td>
              <div
                class="{{
                  (staff?.verified == true ? 'verified' : 'not verified')
                    | colorPipe
                }} uppercase px-2 py-1 w-fit  text-[11px] tracking-widest font-semibold rounded-md"
              >
                {{ staff?.verified == true ? "verified" : "not verified" }}
              </div>
            </td>

            <td
              class="flex items-center font-semibold view gap-1 align-middle cursor-pointer"
              (click)="
                pageChangeHandler(memberPages.VIEW_MEMBER); singleData(staff)
              "
            >
              <img src="assets/icons/eye.svg" />
              view
            </td>
          </tr>

          }
        </ng-container>
        <ng-container *ngIf="activePage === memberPages.ACTIVE_MEMBERS">
          @for (staff of staffs; track staff) {
          <tr>
            <td class="">{{ $index + 1 }}</td>
            <td>
              <div class="flex gap-2 items-center">
                <img
                  class="inline-block h-8 w-8 rounded-full ring-2 ring-white shrink-0"
                  [src]="
                    staff?.profile.profile_picture_url ||
                    staff?.gender == 'male'
                      ? 'assets/imgs/male-avatar.svg'
                      : 'assets/imgs/female-avatar.svg'
                  "
                  alt=""
                />{{ staff?.first_name }} {{ staff?.last_name }}
              </div>
            </td>
            <td class="normal-case">{{ staff?.email }}</td>
            <td class="uppercase">{{ staff?.membership_type }}</td>
            <td class="uppercase">{{ staff?.division?.abbreviation }}</td>

            <td>{{ staff?.phone_number }}</td>
            <td>
              <div
                class="{{
                  (staff?.verified == true ? 'verified' : 'not verified')
                    | colorPipe
                }} uppercase px-2 py-1 w-fit  text-[11px] tracking-widest font-semibold rounded-md"
              >
                {{ staff?.verified == true ? "verified" : "not verified" }}
              </div>
            </td>

            <td
              class="flex items-center font-semibold view gap-1 align-middle cursor-pointer"
              (click)="
                pageChangeHandler(memberPages.VIEW_MEMBER); singleData(staff)
              "
            >
              <img src="assets/icons/eye.svg" />
              view
            </td>
          </tr>

          }
        </ng-container>
        <ng-container *ngIf="activePage === memberPages.INACTIVE_MEMBERS">
          @for (staff of staffs; track staff) {
          <tr>
            <td class="">{{ $index + 1 }}</td>
            <td>
              <div class="flex gap-2 items-center">
                <img
                  class="inline-block h-8 w-8 rounded-full ring-2 ring-white shrink-0"
                  [src]="
                    staff?.profile.profile_picture_url ||
                    'assets/imgs/female-avatar.svg'
                  "
                  onerror="'assets/imgs/female-avatar.svg'"
                  alt=""
                />{{ staff?.first_name }} {{ staff?.last_name }}
              </div>
            </td>
            <td class="normal-case">{{ staff?.email }}</td>
            <td class="uppercase">{{ staff?.membership_type }}</td>
            <td class="uppercase">{{ staff?.division?.abbreviation }}</td>

            <td>{{ staff?.phone_number }}</td>
            <td>
              <div
                class="{{
                  (staff?.verified == true ? 'verified' : 'not verified')
                    | colorPipe
                }} uppercase px-2 py-1 w-fit  text-[11px] tracking-widest font-semibold rounded-md"
              >
                {{ staff?.verified == true ? "verified" : "not verified" }}
              </div>
            </td>

            <td
              class="flex items-center font-semibold view gap-1 align-middle cursor-pointer"
              (click)="
                pageChangeHandler(memberPages.VIEW_MEMBER); singleData(staff)
              "
            >
              <img src="assets/icons/eye.svg" />
              view
            </td>
          </tr>

          }</ng-container
        >
      </tbody>
    </table>
  </div>
</div>

<div class="w-full" *ngIf="activePage === memberPages.VIEW_MEMBER">
  <app-view-member
    [active]="activeTab"
    [member]="staff"
    (page)="getEmit($event)"
    (update)="getUpdate($event)"
  ></app-view-member>
</div>
